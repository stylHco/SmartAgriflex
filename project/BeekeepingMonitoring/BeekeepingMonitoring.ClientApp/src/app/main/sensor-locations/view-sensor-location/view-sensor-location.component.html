<section>

  <div class="selection">
    <h2 class="mb-2">Please select one of the Available Devices</h2>
    <form class="p-fluid"
          [formGroup]="form" (ngSubmit)="submitForm()"
          lossMonitor [lossRouteFilter]="activatedRoute">
      <div class="field">
        <label>
          Devices
          <app-required-field-indicator></app-required-field-indicator>
        </label>

        <p-dropdown inputId="device" formControlName="device"
                    [options]="(availableDevicesOptions$ | async) ?? []"
                    optionValue="entry" optionLabel="label"
                    appPlaceholder appFilterPlaceholder
                    [filter]="true" [autoDisplayFirst]="true"/>
        <app-form-control-errors controlName="device"></app-form-control-errors>
      </div>


      <div>
        <button type="submit" [disabled]="!form.valid"
                pButton class="p-button-success not-fluid">
          Select Sensor
        </button>
      </div>
    </form>

  </div>
</section>

@if (deviceInfo) {
  <section class="my-8">
    <p-card
      [header]='deviceInfo.name'>
      <div>
        <p>You can view the location of the sensor on Google Maps:</p>
        <p-button pRipple label="View Location" icon="pi pi-fw pi-map" size="large" (click)="openLinkInNewTab()"></p-button>
<!--        <gmp-map center="" zoom="4" map-id="DEMO_MAP_ID">-->
<!--          <gmp-advanced-marker position="" title="" gpm-clickable></gmp-advanced-marker>-->
<!--        </gmp-map>-->
      </div>
    </p-card>
  </section>
}
